# Amazon Elastic Kubernetes Service (Amazon EKS)

![alt text](../.images/aws-orchestration-tools.png)

![alt text](../.images/creating-eks-steps.png)

## AWS EKS (Elastic Kubernetes Service)

### Managed by AWS

1. **Control Plane**: AWS manages the Kubernetes control plane, which includes:
   - **API Server**: Manages API requests and communicates with worker nodes.
   - **Etcd**: Key-value store for cluster data.
   - **Scheduler**: Assigns pods to nodes based on resource availability.
   - **Controller Manager**: Ensures the desired state of the cluster is maintained.

### Managed by You

1. **Worker Nodes**: You need to manage the EC2 instances (or Fargate profiles) where your Kubernetes pods run:
   - **Provision and Configure Nodes**: Launch EC2 instances or set up Fargate profiles.
   - **Node Maintenance**: Patch, update, and manage the lifecycle of your nodes.
   - **Node Autoscaling**: Configure the Kubernetes Cluster Autoscaler if needed.

2. **Networking**: Configure VPC, subnets, security groups, and IAM roles/policies.
3. **Kubernetes Resources**: Deploy and manage Kubernetes resources such as:
   - **Pods**: Basic unit of deployment in Kubernetes.
   - **Deployments**: Define and manage the desired state of your pods.
   - **Services**: Networking components to expose your applications.
   - **ConfigMaps and Secrets**: Manage configuration and sensitive information.
   - **Persistent Volumes**: Manage storage for your stateful applications.

## Setup Requirements

1. **Create an EKS Cluster**:
   - **Cluster Creation**: Use the EKS console, CLI, or API to create a new EKS cluster.
   - **Configure IAM Roles**: Set up IAM roles for the EKS service and worker nodes.
   - **Networking**: Set up VPC, subnets, security groups, and IAM policies.
2. **Provision Worker Nodes**:
   - **EC2 Instances**: Launch and configure EC2 instances as worker nodes using the EKS-optimized AMI.
   - **Fargate Profiles**: Set up Fargate profiles if using serverless worker nodes.
3. **Install Kubernetes Tools**:
   - **kubectl**: Install the Kubernetes command-line tool to interact with the cluster.
   - **aws-iam-authenticator**: Set up authentication for EKS clusters.
4. **Configure Node Autoscaling** (optional):
   - **Cluster Autoscaler**: Deploy and configure the Kubernetes Cluster Autoscaler.
5. **Deploy Applications**:
   - **YAML Manifests**: Create and apply Kubernetes YAML manifests for your applications.
   - **Helm Charts**: Use Helm to manage and deploy applications.
6. **Monitoring and Logging**:
   - **CloudWatch**: Set up logging and monitoring using CloudWatch or other third-party tools.
   - **Prometheus/Grafana**: Use Prometheus and Grafana for monitoring and visualization.

## Cost Considerations

- **Control Plane**: Fixed hourly charge for the EKS control plane.
- **Worker Nodes**: Costs associated with EC2 instances or Fargate profiles used for worker nodes.
- **Additional Costs**: Storage, networking, and additional Kubernetes resources (e.g., EBS volumes for Persistent Volumes).

## When to Use

- You need the full capabilities of Kubernetes.
- You have existing Kubernetes workloads or expertise.
- You require advanced Kubernetes features for scaling and orchestration.
- You plan to use a multi-cloud strategy or need portability across different environments.
